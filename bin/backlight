#!/usr/bin/env bash
set -euo pipefail

BCTL="brightnessctl --device=intel_backlight"

notify_backlight() {
  notify-send "$(${BCTL} -m info | cut -d ',' -f4)" "Screen backlight ${1:-N/A}%" -u low
}

case ${1:-} in
  "inc")
    ${BCTL} -q set "+${2}%"
    notify_backlight "increased by ${2}"
    ;;
  "dec")
    ${BCTL} -q set "${2}%-"
    notify_backlight "decreased by ${2}"
    ;;
  "set")
    ${BCTL} -q set "${2}%"
    notify_backlight "set to ${2}"
    ;;
  *) # unknown parameter passed - ignoring
    exit 1
    ;;
esac
