#!/usr/bin/env bash
set -uo pipefail

layout_laptop() {
  xrandr \
  --output VIRTUAL1 --off \
  --output eDP1 --primary --mode 1920x1080 --pos 0x0 --rotate normal \
  --output DP1 --off \
  --output HDMI2 --off \
  --output HDMI1 --off \
  --output DP1-3 --off \
  --output DP1-2 --off \
  --output DP1-1 --off \
  --output DP2 --off
}

layout_work() {
  xrandr \
  --output VIRTUAL1 --off \
  --output eDP1 --off \
  --output DP1 --off \
  --output HDMI2 --off \
  --output HDMI1 --off \
  --output DP1-3 --off \
  --output DP1-2 --primary --mode 1920x1200 --pos 1920x0 --rotate normal --crtc 2 \
  --output DP1-1 --mode 1920x1200 --pos 0x0 --rotate normal \
  --output DP2 --mode 1920x1200 --pos 3840x0 --rotate normal
}

layout_home() {
  xrandr \
  --output VIRTUAL1 --off \
  --output eDP1 --off \
  --output DP1 --off \
  --output HDMI2 --off \
  --output HDMI1 --off \
  --output DP1-3 --off \
  --output DP1-2 --mode 1920x1080 --pos 1920x0 --rotate normal --crtc 2 \
  --output DP1-1 --primary --mode 1920x1080 --pos 0x0 --rotate normal \
  --output DP2 --off
}

layout_tv() {
  xrandr \
  --output VIRTUAL1 --off \
  --output eDP1 --primary --mode 1920x1080 --pos 0x0 --rotate normal \
  --output DP1 --off \
  --output HDMI2 --off \
  --output HDMI1 --mode 1920x1080 --pos 0x0 --rotate normal \
  --output DP1-3 --off \
  --output DP1-2 --off \
  --output DP1-1 --off \
  --output DP2 --off
}

case ${1:-} in
  "laptop")
    layout_laptop
    ;;
  "work")
    layout_work
    ;;
  "home")
    layout_home
    ;;
  "tv")
    layout_tv
    ;;
  *) # unknown parameter passed - ignoring
    exit 1
    ;;
esac

[[ ${?} != 0 ]] && layout_laptop && exit 1
i3-msg restart
notify-send "${1^}" "Screen layout enabled" -u low
